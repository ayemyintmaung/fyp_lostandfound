{"ast":null,"code":"import instance from '../utils/api';\nexport const storeToken = token => {\n  localStorage.setItem('token', JSON.stringify(token));\n  instance.defaults.headers.common.authorization = \"Bearer \".concat(token);\n};\nexport const loginAPI = data => dispatch => {\n  const promise = new Promise((resolve, reject) => {\n    instance.post('auth/login', data).then(res => {\n      dispatch({\n        type: 'SET_LOGIN',\n        value: res.data.token\n      });\n      storeToken(res.data.token);\n      resolve(res);\n    }, err => {\n      reject(err);\n    });\n  });\n  return promise;\n};\nexport const logoutAPI = () => dispatch => {\n  const promise = new Promise((resolve, reject) => {\n    dispatch({\n      type: 'SET_LOGOUT',\n      value: null\n    });\n    localStorage.removeItem('token');\n  });\n  return promise;\n};\nexport const registerAPI = data => dispatch => {\n  const promise = new Promise((resolve, reject) => {\n    instance.post('auth/register', data).then(res => {\n      dispatch({\n        type: 'SET_REGISTER',\n        value: 'You signed up to this site successfully.'\n      });\n      dispatch({\n        type: 'SET_LOGIN',\n        value: res.data.token\n      });\n      storeToken(res.data.token);\n      resolve(res);\n    }, err => {\n      reject(err);\n    });\n  });\n  return promise;\n};\nexport const getProtectedAPI = () => dispatch => {\n  const promise = new Promise((resolve, reject) => {\n    instance.get('protected').then(res => {\n      dispatch({\n        type: 'SET_ADMIN',\n        value: res.data.message\n      });\n      resolve(res);\n    }, err => {\n      reject(err);\n    });\n  });\n  return promise;\n};","map":{"version":3,"sources":["D:\\@Downloads\\react-redux-login-register-master\\src\\actions\\auth.js"],"names":["instance","storeToken","token","localStorage","setItem","JSON","stringify","defaults","headers","common","authorization","loginAPI","data","dispatch","promise","Promise","resolve","reject","post","then","res","type","value","err","logoutAPI","removeItem","registerAPI","getProtectedAPI","get","message"],"mappings":"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","sourcesContent":["import instance from '../utils/api';\n\n\nexport const storeToken = (token) => {\n  localStorage.setItem('token', JSON.stringify(token));\n  instance.defaults.headers.common.authorization = `Bearer ${token}`;\n}\n\nexport const loginAPI = (data) => (dispatch) => {\n\tconst promise = new Promise((resolve, reject) => {\n\t\tinstance.post('auth/login', data)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({type: 'SET_LOGIN', value: res.data.token});\n\t\t\t\tstoreToken(res.data.token);\n\t\t\t\tresolve(res);\n\t\t\t}, (err) => {\n\t\t\t\treject(err);\n\t\t\t})\n\t})\n\n\treturn promise\n}\n\nexport const logoutAPI = () => (dispatch) => {\n\tconst promise = new Promise((resolve, reject) => {\n\t\t\t\tdispatch({type: 'SET_LOGOUT', value: null});\n\t\t\t\tlocalStorage.removeItem('token');\n\t})\n\n\treturn promise\n}\n\nexport const registerAPI = (data) => (dispatch) => {\n\tconst promise = new Promise((resolve, reject) => {\n\t\tinstance.post('auth/register', data)\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({type: 'SET_REGISTER', value: 'You signed up to this site successfully.'});\n\t\t\t\tdispatch({type: 'SET_LOGIN', value: res.data.token});\n\t\t\t\tstoreToken(res.data.token);\n\t\t\t\tresolve(res);\n\t\t\t}, (err) => {\n\t\t\t\treject(err);\n\t\t\t})\n\t})\n\n\treturn promise\n}\n\nexport const getProtectedAPI = () => (dispatch) => {\n\tconst promise = new Promise((resolve, reject) => {\n\t\tinstance.get('protected')\n\t\t\t.then((res) => {\n\t\t\t\tdispatch({type: 'SET_ADMIN', value: res.data.message})\n\t\t\t\tresolve(res);\n\t\t\t}, (err) => {\n\t\t\t\treject(err);\n\t\t\t})\n\t})\n\n\treturn promise\n}\n"]},"metadata":{},"sourceType":"module"}